<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Iris KNN ë¶„ë¥˜ê¸°</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
<div class="container">
    <h1>ğŸŒ¸ ë¶“ê½ƒ í’ˆì¢… ì˜ˆì¸¡ê¸° (KNN)</h1>

    <form method="post" id="iris-form">
        <div class="input-group">
            <label>Sepal Length (cm)
                <span class="tooltip">?
                    <span class="tooltip-text">
                        í‰ê· ê°’<br>
                        â€¢ setosa â‰ˆ 5.0<br>
                        â€¢ versicolor â‰ˆ 5.9<br>
                        â€¢ virginica â‰ˆ 6.6
                    </span>
                </span>
            </label>
            <input id="sepal_length" type="number" step="0.01" name="sepal_length" required>
        </div>

        <div class="input-group">
            <label>Sepal Width (cm)
                <span class="tooltip">?
                    <span class="tooltip-text">
                        í‰ê· ê°’<br>
                        â€¢ setosa â‰ˆ 3.4<br>
                        â€¢ versicolor â‰ˆ 2.8<br>
                        â€¢ virginica â‰ˆ 2.9
                    </span>
                </span>
            </label>
            <input id="sepal_width" type="number" step="0.01" name="sepal_width" required>
        </div>

        <div class="input-group">
            <label>Petal Length (cm)
                <span class="tooltip">?
                    <span class="tooltip-text">
                        í‰ê· ê°’<br>
                        â€¢ setosa â‰ˆ 1.5<br>
                        â€¢ versicolor â‰ˆ 4.3<br>
                        â€¢ virginica â‰ˆ 5.6
                    </span>
                </span>
            </label>
            <input id="petal_length" type="number" step="0.01" name="petal_length" required>
        </div>

        <div class="input-group">
            <label>Petal Width (cm)
                <span class="tooltip">?
                    <span class="tooltip-text">
                        í‰ê· ê°’<br>
                        â€¢ setosa â‰ˆ 0.25<br>
                        â€¢ versicolor â‰ˆ 1.3<br>
                        â€¢ virginica â‰ˆ 2.0
                    </span>
                </span>
            </label>
            <input id="petal_width" type="number" step="0.01" name="petal_width" required>
        </div>

        <!-- âœ… ëŒ€í‘œê°’ ìë™ì…ë ¥ ë²„íŠ¼ (ì‘ê³  ì…ë ¥ì¹¸ ì•„ë˜ ë°°ì¹˜) -->
        <div class="preset-group">
            <button type="button" class="btn preset" data-species="setosa">setosa</button>
            <button type="button" class="btn preset" data-species="versicolor">versicolor</button>
            <button type="button" class="btn preset" data-species="virginica">virginica</button>
        </div>

        <button type="submit">ğŸŒ¼ ì˜ˆì¸¡í•˜ê¸°</button>
    </form>

    {% if prediction %}
        <div class="result">
            ì˜ˆì¸¡ ê²°ê³¼: <span class="pill">{{ prediction }}</span>
        </div>

        {% if image_url %}
            <div class="result-img">
                <img src="{{ image_url }}" alt="Iris {{ prediction }} image">
            </div>
            <div class="caption">ì˜ˆì¸¡ëœ í’ˆì¢… ì´ë¯¸ì§€ (ìƒ˜í”Œ)</div>
        {% endif %}
    {% endif %}

    {% if err_msg %}
        <div class="error">{{ err_msg }}</div>
    {% endif %}

    <div class="footer">Made with ğŸ’œ Flask & KNN | AI Software Dept.</div>
</div>

<script>
    const PRESETS = {
        setosa:      { sepal_length: 5.00, sepal_width: 3.43, petal_length: 1.46, petal_width: 0.25 },
        versicolor:  { sepal_length: 5.94, sepal_width: 2.77, petal_length: 4.26, petal_width: 1.33 },
        virginica:   { sepal_length: 6.59, sepal_width: 2.97, petal_length: 5.55, petal_width: 2.03 }
    };

    function fillForm(values) {
        document.getElementById('sepal_length').value = values.sepal_length;
        document.getElementById('sepal_width').value  = values.sepal_width;
        document.getElementById('petal_length').value = values.petal_length;
        document.getElementById('petal_width').value  = values.petal_width;
    }

    document.querySelectorAll('.preset').forEach(btn => {
        btn.addEventListener('click', () => {
            const species = btn.getAttribute('data-species');
            const values = PRESETS[species];
            if (values) fillForm(values);
        });
    });
</script>
</body>
</html>
